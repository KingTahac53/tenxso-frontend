<div class="feeds-container">
  <!-- Display message if no feeds are available -->
  <div *ngIf="noFeedsMessage" class="no-feeds-message">
    {{ noFeedsMessage }}
  </div>

  <!-- Loop through each feed -->
  <div *ngFor="let feed of feeds" class="feed-box">
    <!-- Feed Header -->
    <div class="feed-header">
      <img [src]="feed.title" alt="Profile Picture" class="profile-pic" />
      <span class="feed-author">{{ feed.authorUsername }}</span>
    </div>

    <!-- Feed Caption -->
    <div *ngIf="feed.caption && feed.caption.trim()" class="feed-caption">
      {{ feed.caption }}
    </div>

    <!-- Feed Content -->
    <div class="feed-content">
      <div *ngIf="isVideo(feed.content); else notVideo" class="feed-video-wrapper">
        <video
          id="video-player-{{ feed.postId }}"
          class="video-js"
          controls
          autoplay
          muted
          preload="auto"
          loop
        >
          <source [src]="feed.content" type="video/mp4" />
        </video>
      </div>

      <ng-template #notVideo>
        <div class="feed-image-wrapper">
          <img [src]="feed.content" alt="Feed Content" class="feed-image" />
        </div>
      </ng-template>
    </div>

    <!-- Feed Actions -->
    <div class="feed-actions">
      <div class="download-button">
        <a [href]="feed.content" target="_self" download>
          <i class="fas fa-download"></i> Download
        </a>
      </div>

      <button class="like-button" [class.liked]="feed.likeFlag === 1" (click)="likePost(feed)">
        <i class="fas fa-heart"></i> {{ feed.likeCount || 0 }} Likes
      </button>

      <div class="comment-button">
        <i class="fas fa-comment"></i> {{ feed.commentCount || 0 }} Comment
      </div>

      <div class="report-button">
        <button>
          <i class="fas fa-flag"></i> Report
        </button>
      </div>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-spinner">Loading...</div>
</div>
